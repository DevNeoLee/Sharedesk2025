
<%# front two main images with local access %>
<div class="bg-light p-5 rounded home-section mb-5 section">
  <div class="text-center mb-4">
    <h1 class="display-4 mb-3">Need A Quick Workspace In <%= @location_received %>?</h1>
    <p class="lead text-muted" style="letter-spacing: 1px;">Find an office instantly in your area.</p>
  </div>
  <div class="row">
    <div class="col-md-6 mb-4">
      <%= image_tag "main_image2.jpg", class: "img-fluid rounded shadow" %>
    </div>
    <div class="col-md-6 mb-4">
      <%= image_tag "main_image1.jpg", class: "img-fluid rounded shadow" %>
    </div>
  </div>
  <div class="text-start mt-4">
    <%= link_to search_path(q: {"address_cont": @location_received }) do %>
      <button class="btn btn-cta btn-lg">Find in Your Area</button>
    <% end %>
  </div>
</div>


<%# one click search for three main cities ard the world %>
<div class="bg-light p-5 rounded home-section mb-5 section">
    <div class="text-center">
        <h2>Any City</h2>
        <p class="lead text-muted" style="letter-spacing: 1px;">Discover amazing workspaces around you</p>


    </div>
    <br>
    <div class="row">
        <div class="col-md-4 col-sm-12">        
            <%= link_to search_path(q:{"address_cont": "NYC"} ) do %>
                <div class="card shadow mb-2 city-card">
                    <div class="card-header">       
                        <h2><strong>NYC</strong></h2>
                    </div>
                    <%= image_tag "nyc_home_page_pexels-ono-kosuki.jpg", class: "img-fluid image-medium image_response" %>
                    <div class="card-body">
                        <div class="card-text">
                            Find Home on Our Cozy Cowork Places Just Around the Corner
                        </div>
                    </div>
                </div>
            <% end %>    
        </div>    
    <div class="col-md-4 col-sm-12">
        <%= link_to search_path(q:{"address_cont": "Kolkata"}) do %>
            <div class="card shadow mb-2 city-card">
                <div class="card-header">                    
                    <h2><strong>Kolkata</strong></h2>                    
                </div>
                <%= image_tag "kolkata_home_page_pexels-neosiam-.jpg", class: "img-fluid image-medium image_response"%>
                <div class="card-body">
                    <div class="card-text">
                        Professional Cowork Space in Busy Diverse Dinamic City
                    </div>
                </div>
            </div>
        <% end %>
        </div>
    <div class="col-md-4 col-sm-12">
        <%= link_to search_path(q:{"address_cont": "Bangkok"}) do %>
            <div class="card shadow mb-2 city-card">
                <div class="card-header">                    
                    <h2><strong>Bangkok</strong></h2>                    
                </div>
                    <%= image_tag "bangkok_home_page_pexels-nick-wehrli.jpg" , class: "img-fluid image-medium"%>                         
                <div class="card-body">
                    <div class="card-text">
                        Remote Work Desk Spot in This Beautiful Backpackers Heaven 
                    </div>
                </div>
            </div>
        <% end %>
        </div>
    </div>
</div>

<%# Ad for Hosting your Space %>
<div class="bg-light p-5 rounded home-section mb-5 section">

        <h2 class="text-center"> Host your space in your city for extra income</h2>
        <%= link_to new_user_registration_path do %>
            <h5 class="text-center pt-3">Join Desk<%= image_tag 'orangePolygonLarge.png', width: "50" %>Share your place for your local community</h5>
        <% end %>
       
</div>

<%# mid-search form %>
<div class="bg-light mb-5 p-5 rounded section">
    <div class="" style="top: 20px; z-index: 1000;">
        <h2 class="text-center mb-5"> Make Reservation</h2>

        <%= search_form_for @search, url: search_path, method: :get do |f| %>
            <div class="row align-items-end">
                <div class="col-md-5 mb-3">
                    <label class="form-label text-muted mb-2">Destination</label>
                    <%= f.search_field :address_cont, placeholder: "Where are you going?", class: "form-control"%>
                </div>
                <div class="col-md-2 mb-3">
                    <label class="form-label text-muted mb-2">Start Date</label>
                    <%= text_field_tag :start_date, nil, {placeholder: "Start Date", id: "start_date", class: "form-control"}%>
                </div>
                <div class="col-md-2 mb-3">
                    <label class="form-label text-muted mb-2">End Date</label>
                    <%= text_field_tag :end_date, nil, placeholder: "End Date", class: "form-control", id: "end_date"%>
                </div>
                <div class="col-md-3 mb-3">
                    <%= f.submit "Check Availability", class: "btn btn-primary"%>
                </div>
            </div>
        <% end %>
    </div>
</div>

<%# Top Most Poplular Picks %>
<div class="bg-light p-5 rounded home-section col-md-12 mb-5 section">
    <div class="text-center mb-5 h3">
        <h2 class="title_font">Highly Rated Locations by Our Reviewers </h2>
    </div>
    <div class="row">    
        <%= render @best_rooms %>
    </div>
</div>

<%# customer reviews %>
<div class="bg-light p-5 rounded home-section mb-5 section">
    <div class="text-center">
        <h2 class="mb-4">Customer Reviews</h2>
    </div>
    <div class="col-md-12"> 
        <%= render partial: 'reviews/review', locals: {reviews: @best_reviews} %>
    </div>
</div>

<script>
    // Wait for jQuery UI to be fully loaded
    function initializeDatepickers() {
        if (typeof $ !== 'undefined' && typeof $.fn.datepicker !== 'undefined') {
            $('#start_date').datepicker({
                dateFormat: 'dd-mm-yy',
                minDate: 0,
                maxDate: '3m',
                onSelect: function(select) {
                    $('#end_date').datepicker("option", "minDate", select);
                    $('#end_date').attr('disabled', false);
                }
            });
            
            $('#end_date').datepicker({
                dateFormat: 'dd-mm-yy',
                minDate: 0,
                maxDate: '3m',
                onSelect: function(select) {
                    $('#start_date').datepicker("option", "maxDate", select);
                }
            });
        } else {
            // Retry after a short delay
            setTimeout(initializeDatepickers, 100);
        }
    }
    
    document.addEventListener('DOMContentLoaded', function() {
        initializeDatepickers();
    });
</script>
